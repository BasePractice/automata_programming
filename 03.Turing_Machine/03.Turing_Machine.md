# Абстрактные вычислительные машины

## Машина Тьюринга
Материал взят с ресурса [Планета информатики](https://www.inf1.info/turing)

Машина Тьюринга - абстрактный исполнитель (абстрактная вычислительная машина). Была предложена Аланом Тьюрингом в 1936 году для формализации понятия алгоритма.

Машина Тьюринга является расширением конечного автомата и, согласно тезису Чёрча - Тьюринга, способна имитировать всех исполнителей (с помощью задания правил перехода), каким-либо образом реализующих процесс пошагового вычисления, в котором каждый шаг вычисления достаточно элементарен.

То есть, всякий интуитивный алгоритм может быть реализован с помощью некоторой машины Тьюринга.

### Описание

Машина Тьюринга состоит из бесконечной в обе стороны ленты, разделенной на ячейки, и автомата (головки), которая управляется программой.
Программы для машин Тьюринга записываются в виде таблицы, где первые столбец и строка содержат буквы внешнего алфавита и возможные внутренние состояния автомата (внутренний алфавит). Содержимое таблицы представляет собой команды для машины Тьюринга. Буква, которую считывает головка в ячейке (над которой она находится в данный момент), и внутренне состояние головки определяют, какую команду нужно выполнить. Команда определяется пересечением символов внешнего и внутреннего алфавитов в таблице.

#### Чтобы задать конкретную машину Тьюринга, требуется описать для нее следующие составляющие:

1. Внешний алфавит. Конечное множество (например, `А`), элементы которого называются буквами (символами). Одна из букв этого алфавита (например, `Q0`) должна представлять собой пустой символ.
2. Внутренний алфавит. Конечное множество состояний головки (автомата). Одно из состояний (например, `Q1`) должно быть начальным (запускающим программу). Еще одно из состояний (`Q0`) должно быть конечным (завершающим программу) – состояние останова.
3. Таблица переходов. Описание поведения автомата (головки) в зависимости от состояния и считанного символа.

#### Автомат машины Тьюринга в процессе своей работы может выполнять следующие действия:

1. Записывать символ внешнего алфавита в ячейку (в том числе и пустой), заменяя находившийся в ней (в том числе и пустой).
2. Передвигаться на одну ячейку влево или вправо.
3. Менять свое внутреннее состояние.

Одна команда для машины Тьюринга как раз и представляет собой конкретную комбинацию этих трех составляющих: указаний, какой символ записать в ячейку (над которой стоит автомат), куда передвинуться и в какое состояние перейти. Хотя команда может содержать и не все составляющие (например, не менять символ, не передвигаться или не менять внутреннего состояния).

### Пример

Пример работы машины Тьюринга
Допустим, на ленте есть слово, состоящее из символов `#,` `$,` `1` и `0`. Требуется заменить все символы `#` и `$` на нули. В момент запуска головка находится над первой буквой слова слева. Завершается программа тогда, когда головка оказывается над пустым символом после самой правой буквы слова.
Примечание: длина слова и последовательность символов значения не имеют. На рисунке приводится пример последовательности выполнения команд для конкретного случая. Если на ленте будет другое слово, то и последовательность выполнения команд будет другой. Несмотря на это, данная программа для машины Тьюринга (на рисунке – таблица слева) применима к любым словам описанного внешнего алфавита (соблюдается свойство применимости алгоритма ко всем однотипным задачам – массовость).

![Пример работы №1](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/turing.png)

Можно усложнить программу. Допустим, головка располагается не обязательно над первым, а над любым символом слова. Тогда программа для данной машины Тьюринга может быть такой (а могла бы быть и другой):

![Пример работы №2](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/turing2.png)

Здесь происходит сдвиг головки влево до тех пор, пока она не окажется над пустым символом. После этого машина переходит в состояние `Q2` (команды которого совпадают с командами `Q1` предыдущей программы).

### Задачи
Материал взят с ресурса [Планета информатики](http://inf.1september.ru/articlef.php?ID=200600802)

Практические задания

1. На ленте машины Тьюринга содержится последовательность символов `+`. Напишите программу для машины Тьюринга, которая каждый второй символ `+` заменит на `-`. Замена начинается с правого конца последовательности. Автомат в состоянии `Q1` обозревает один из символов указанной последовательности. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

2. Дано число `n` в восьмеричной системе счисления. Разработать машину Тьюринга, которая увеличивала бы заданное число `n` на `1`. Автомат в состоянии `Q1` обозревает некую цифру входного слова. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

3. Дана десятичная запись натурального числа `n > 1`. Разработать машину Тьюринга, которая уменьшала бы заданное число `n` на `1`. Автомат в состоянии `Q1` обозревает правую цифру числа. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

4. Дано натуральное число `n > 1`. Разработать машину Тьюринга, которая уменьшала бы заданное число `n` на `1`, при этом в выходном слове старшая цифра не должна быть `0`. Например, если входным словом было `100`, то выходным словом должно быть `99`, а не `099`. Автомат в состоянии `Q1` обозревает правую цифру числа. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

5. Дан массив из открывающих и закрывающих скобок. Построить машину Тьюринга, которая удаляла бы пары взаимных скобок, т.е. расположенных подряд `( )`. Например, дано `) ( ( ) ( ( )`, надо получить `) . . . ( ( `. Автомат в состоянии `Q1` обозревает крайний левый символ строки. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

6. Дана строка из букв `a` и `b`. Разработать машину Тьюринга, которая переместит все буквы `a` в левую, а буквы `b` - в правую части строки. Автомат в состоянии `Q1` обозревает крайний левый символ строки. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

7. На ленте машины Тьюринга находится число, записанное в десятичной системе счисления. Умножить это число на `2`. Автомат в состоянии `Q1` обозревает крайнюю левую цифру числа. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

8. Даны два натуральных числа `m` и `n`, представленные в унарной системе счисления. Соответствующие наборы символов `|` разделены пустой клеткой. Автомат в состоянии `Q1`обозревает самый правый символ входной последовательности. Разработать машину Тьюринга, которая на ленте оставит сумму чисел `m` и `n`. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

9. Даны два натуральных числа `m` и `n`, представленных в унарной системе счисления. Соответствующие наборы символов `|` разделены пустой клеткой. Автомат в состоянии `Q1` обозревает самый правый символ входной последовательности. Разработать машину Тьюринга, которая на ленте оставит разность чисел `m` и `n`. Известно, что `m > n`. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.

10. На ленте машины Тьюринга находится десятичное число. Определить, делится ли это число на `5` без остатка. Если делится, то записать справа от числа слово `да`, иначе - `нет`. Автомат обозревает некую цифру входного числа. Кроме самой программы-таблицы, описать словами, что выполняется машиной в каждом состоянии.


### Решение

#### Задача 1

![Задача №1](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_01.png)

В состоянии `Q1` машина ищет правый конец числа, в состоянии `Q2` - пропускает знак `+`, при достижении конца последовательности - останавливается. В состоянии `Q3` машина знак `+` заменяет на знак `-`, при достижении конца последовательности она останавливается.

#### Задача 2

![Задача №2](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_02.png)

Решение этой задачи аналогично рассмотренному выше примеру.

#### Задача 3

![Задача №3](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_03.png)

Состояние `Q1` - уменьшаем младшую (очередную) цифру на `1`. Если она не равна нулю, то после уменьшения сразу - останов, если же младшая цифра равна `0`, то вместо нее пишем `9`, смещаемся влево и вновь выполняем вычитание. В клетку [``A0``, `Q1`] машина Тьюринга никогда не попадет, поэтому ее можно не заполнять.

#### Задача 4 (усложнение задачи 3)

![Задача №4](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_04.png)

Состояние ``Q1`` - уменьшаем младшую (очередную) цифру на `1`. Если она больше `1`, то после уменьшения - сразу останов, если же младшая цифра равна `0`, то вместо нее пишем `9`, смещаемся влево и вновь выполняем вычитание. Если уменьшаемая цифра равна `1`, то вместо нее пишем `0` и переходим в состояние `Q2`.

Состояние `Q2` - после записи `0` в каком-либо разряде надо проанализировать, не является ли этот ноль старшей незначащей цифрой (т.е. не стоит ли слева от него в записи выходного слова ``A0``).

Состояние `Q3` - если записанный `0` является старшей незначащей цифрой, то его надо удалить из записи выходного слова.

Те клетки, в которые машина Тьюринга никогда не попадает, оставляем пустыми.

#### Задача 5

![Задача №5](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_05.png)

Состояние `Q1`: если встретили `(`, то сдвиг вправо и переход в состояние `Q2`; если встретили ``A0``, то останов.

Состояние `Q2`: анализ символа `(` на парность, в случае парности должны увидеть `).` Если парная, то возврат влево и переход в состояние `Q3`.

Состояние `Q3`: стираем сначала `(`, затем `)` и переходим в `Q1`.

#### Задача 6

Решение этой задачи обычно вызывает у школьников затруднение. При разборе решения этой задачи можно пойти, например, следующим путем.

Рассмотрите со школьниками следующие варианты входных слов и попросите их сформулировать, что должна делать машина Тьюринга, каков внешний вид выходного слова, чем с точки зрения машины Тьюринга эти варианты различаются:

`aaa` -> выходное слово совпадает с входным, просматриваем входное слово до тех пор, пока оно не заканчивается.

`a` -> выходное слово совпадает с входным, просматриваем входное слово до тех пор, пока оно не заканчивается.

`bbb` -> выходное слово совпадает с входным, просматриваем входное слово до тех пор, пока оно не заканчивается.

`b` -> выходное слово совпадает с входным, просматриваем входное слово до тех пор, пока оно не заканчивается.

`ab` -> выходное слово совпадает с входным, просматриваем входное слово до тех пор, пока оно не заканчивается.

Результат обсуждения. Машина Тьюринга должна "понимать", по цепочке каких букв она идет, т.е. у нее должно быть как минимум два состояния. Пусть состояние `Q1` - движение по цепочке из букв `a`, а `Q2` - состояние движения по цепочке из букв `b`. Заметим, что цепочка может состоять и из одной буквы. Если мы дошли до конца строки в состоянии `Q1` или `Q2`, т.е. встретили ``A0``, машина должна остановиться, мы обработали всю строку.

Рассмотрим следующие варианты входных слов:

`bba` -> `abb`

`bbbaab` -> `aabbbb`

`aabbbaab` -> `aaaabbbb`

Результат обсуждения. Первый вариант входного слова можно последовательно обработать следующим образом: `bba` -> `bbb` -> вернуться к левому концу цепочки из букв `b` -> `abb` (заменить первую букву в этой цепочке на `a`). Для выполнения этих действий нам потребуется ввести два новых состояния и, кроме того, уточнить состояние `Q2`. Таким образом, для решения этой задачи нам нужно построить машину Тьюринга со следующими состояниями:

`Q1` - идем вправо по цепочке букв `a`. Если цепочка заканчивается `A0`, то переходим в `Q0`; если заканчивается буквой `b`, то переходим в `Q2`;

`Q2` - идем вправо по цепочке букв `b`, если цепочка заканчивается `A0`, то переходим в `Q0`; если заканчивается `a`, то заменяем букву `a` на `b`, переходим в состояние `Q3` (цепочку вида  заменили на цепочку вида );

`Q3` - идем влево по цепочке букв `b` до ее левого конца. Если встретили `A0` или `a`, то переходим в `Q4`;

`Q4` - заменяем `b` на `a` и переходим в `Q1` (цепочку вида  заменяем на цепочку вида .

![Задача №6](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_06.png)

#### Задача 7

![Задача №7](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_07.png)

состояние `Q1` - поиск правой (младшей) цифры числа;

состояние `Q2` - умножение очередной цифры числа на `2` без прибавления `1` переноса;

состояние `Q3` - умножение очередной цифры числа на `2` с прибавлением `1` переноса.

#### Задача 8

Машина Тьюринга для этой программы выглядит тривиально просто - в ней всего одно состояние. Такая машина Тьюринга выполняет следующие действия: стирает самый правый штрих, ищет разделитель (пустую ячейку) и в эту пустую ячейку помещает штрих, тем самым сформирована непрерывная последовательность штрихов длины `n + m`.

![Задача №8_1](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_08_1.png)

Однако, как ни странно, решение этой задачи вызывает большие трудности. Очень часто ученики строят машину Тьюринга, которая выполняет циклические действия: последовательно пододвигают правые `n` штрихов к левым.

![Задача №8_2](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_08_2.png)

В этом случае их программа выглядит следующим образом:

![Задача №8_3](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_08_3.png)

состояние `Q1` - поиск разделителя;

состояние `Q2` - передвинули штрих;

состояние `Q3` - проверка на конец (все ли штрихи передвинули).

На примере этой задачи четко видно, как часто дети пытаются решить задачу уже знакомыми способами. Мне кажется, что, предлагая ученикам задачи на составление машин Тьюринга, мы развиваем способность к нахождению необычных решений, развиваем способность творчески думать!

#### Задача 9

Эта задача кажется школьникам достаточно легкой, но трудности возникают с остановом машины Тьюринга. Ниже приведен один из возможных вариантов машины Тьюринга для этой задачи.

Идея решения (условие останова). На ленте есть два исходных массива штрихов.

![Задача №9_1](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_09_01.png)

Штрихи начинаем стирать с левого конца массива `m`. И поочередно стираем самый левый штрих в массиве `m` и самый правый штрих в массиве `n`. Но прежде чем стереть правый штрих в массиве `n`, проверяем, единственный он (т.е. последний, который надо стереть) или нет.

Опишем сначала состояния машины Тьюринга, которые необходимы для решения нашей задачи, а затем составим программу-таблицу.

Состояние `Q1` - поиск разделителя между массивами штрихов при движении справа налево;

состояние `Q2` - поиск левого штриха в массиве `m`;

состояние `Q3` - удаление левого штриха в массиве `m`;

состояние `Q4` - поиск разделителя при движении слева направо;

состояние `Q5` - поиск правого штриха в массиве `n`;

состояние `Q6` - проверка единственности этого штриха в массиве `n`, т.е. определяем, был ли он последним;

состояние `Q7` - если он был последним, то останов, иначе переход на новый цикл выполнения алгоритма.

![Задача №9_2](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_09_2.png)

#### Задача 10

При решении этой задачи следует обратить внимание на правильное выписывание алфавита:

`A` = {`A0`, `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `9`, `Д`, `А`, `Н`, `Е`, `Т`}.

![Задача №10](https://github.com/BasePractice/automata_programming/blob/develop/03.Turing_Machine/t_10.png)

Состояние `Q1` - поиск правого конца числа;

состояние `Q2` - анализ младшей цифры числа; если она равна `0` или `5`, т.е. число делится на `5`, то переход в состояние `Q3`, иначе переход в состояние `Q5`;

состояние `Q3` - запись буквы `Д` справа от слова на ленте;

состояние `Q4` - запись буквы `А` справа от слова и останов машины;

состояние `Q5` - запись буквы `Н` справа от слова;

состояние `Q6` - запись буквы `Е` справа от слова;

состояние `Q7` - запись буквы `Т` справа от слова и останов машины.

### `Algo2000`
